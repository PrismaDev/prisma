var LayoutStringsModel=Backbone.Model.extend({defaults:{hiStr:"Ol\u00e1",loginStr:"Login",logoutStr:"Logout",commentsStr:"Sugest\u00f5es",updatesStr:"Updates",FAQStr:"FAQ",tutorialStr:"V\u00eddeo-tutorial",codTutorialYoutube:"XHF8WOJ6xI0",projectNameStr:"PrISMA",userName:"Bobteco da Silva",footerText:"Esse projeto \u00e9 uma colabora\u00e7\u00e3o dos alunos\t\t\tJulio Ribeiro, Luiza Silva, Gabriel Martinelli,\t\t\tAndr\u00e9 Mar\u00e7al, Denis Neves, Glauber Borges e\t\t\tMaur\u00edcio Fragale com o professor S\u00e9rgio Lifschitz. \t\t\tContato: prisma@inf.puc-rio.br"}}),
layoutStringsModel=new LayoutStringsModel,FAQStringsModel=Backbone.Model.extend({defaults:{dialogTitle:"FAQ",answerStr:"Resposta:",questionStr:"Pergunta:",questionList:[{question:"N\u00e3o consigo logar no sistema.",answer:"Verifique se suas credenciais do PUC Online est\u00e3o corretas. Caso positivo, verifique se seu navegador est\u00e1 configurado para aceitar COOKIES."},{question:"O que significa cada cor na tabela de falta-cursar?",answer:'Vermelho: disciplina presa por algum pr\u00e9-requisito;\nAmarelo: disciplina que voc\u00ea est\u00e1 cursando ou que est\u00e1 presa por algum pr\u00e9-requisito que voc\u00ea est\u00e1 cursando;\nBranco: voc\u00ea est\u00e1 "apto" a cursar. Sugerimos verificar ementa no site da PUC para comprovar aptid\u00e3o.\nAzul: disciplina selecionada. Suas turmas est\u00e3o sendo exibidas;'},
{question:"Como adiciono turma?",answer:"Basta clicar na turma em quest\u00e3o."},{question:"Como removo turma?",answer:'Clique nela novamente.\nOu ent\u00e3o a visualize na aba de selecionadas e clique no bot\u00e3o "x".'},{question:"Como sei que a turma foi inserida?",answer:"\u00c9 apresentada uma notifica\u00e7\u00e3o na aba de selecionadas e aparece na tabela de horarios em cores sempre distintas."},{question:"Como adiciono disciplinas que n\u00e3o est\u00e3o no meu falta cursar?",answer:"Basta procurar a turma na aba de micro hor\u00e1rio e clicar na disciplina e depois na turma desejada."},
{question:"O que fazer na tela de selecionada?",answer:"Voc\u00ea pode fazer o que quiser, basicamente. Tanto trocar as turmas de posi\u00e7\u00e3o movendo-as para um lugar vazio, quanto trocando-as de lugar com alguma outra. Assim como tamb\u00e9m \u00e9 poss\u00edvel trocar as linhas de ordem."},{question:"Mas por que isso \u00e9 importante?",answer:"Porque o PUC Online funciona assim. Ao fazer o processamento das disciplinas, as disciplinas mais priorit\u00e1rias ser\u00e3o aquelas que est\u00e3o nas primeiras linhas e primeiras op\u00e7\u00f5es. Desta maneira, voc\u00ea pode trocar a prioridade de todas as turmas escolhidas simplesmente arrastando elas para onde voc\u00ea quiser."},
{question:"Ok, mas e da\u00ed?",answer:"Da\u00ed que voc\u00ea pode usar a magica funcionalidade dos radio buttons, apresentados logo do lado esquerdo de cada lugar que pode receber uma turma. Esses radio buttons representam a turma que foi poss\u00edvel de pegar na simula\u00e7\u00e3o."},{question:"Simula\u00e7\u00e3o? Como funciona?",answer:"Tem por objetivo simular o que pode acontecer com a sua solicita\u00e7\u00e3o de matr\u00edcula no PUC Online.\nTendo conhecimento da prioriza\u00e7\u00e3o das primeiras linhas e primeiras op\u00e7\u00f5es, a simula\u00e7\u00e3o tenta sempre pegar as turmas nesse sentido do processamento. Isto \u00e9, voc\u00ea pode simular as op\u00e7\u00f5es que ser\u00e3o pegas em cada linha. Automaticamente ser\u00e1 realizada uma cascata nas linhas menos priorit\u00e1rias de forma a mostrar o que realmente aconteceria caso aquela op\u00e7\u00e3o fosse pega."},
{question:"Legal. Montei minha grade, e agora?",answer:"Infelizmente sua grade est\u00e1 salva em nosso sistema, mas n\u00e3o no PUC Online. Voc\u00ea deve entrar com os dados que foram gerados aqui no sistema de requisi\u00e7\u00e3o de matr\u00edcula acad\u00eamica, que fica localizado dentro do PUC Online."},{question:"O sistema apresenta erros / n\u00e3o funciona no meu navegador.",answer:"Infelizmente o sistema foi desenvolvido tirando proveito de recursos n\u00e3o suportados por browsers muito antigos. Recomendo a utiliza\u00e7\u00e3o da vers\u00e3o mais recente do seu browser favorito. N\u00e3o esque\u00e7a de nos notificar o bug para que possamos tentar consert\u00e1-lo; utilize o campo de sugest\u00f5es para tal\nObs: o site pode estar n\u00e3o completamente funcional no Internet Explorer. Recomendamos o uso de algum outro navegador popular dispon\u00edvel atualmente. Aqueles que recomendamos s\u00e3o: Google Chrome, Mozilla Firefox, Opera."}]}}),
faqStringsModel=new FAQStringsModel;
LayoutView=Backbone.View.extend({el:"body",template:"",contentView:null,loggedIn:!1,dialogDiv:"#dialog-div",events:{"click #open-suggestions-link":"openSuggestionDialog","click #open-faq-link":"openFAQDialog","click #open-tutorial-link":"openTutorialDialog","click #open-updates-link":"openUpdatesDialog","click ul div.dropdown-menu":"preventClose"},openSuggestionDialog:function(){suggestionsView.render();$(this.dialogDiv).modal("show")},openFAQDialog:function(){faqView.render();$(this.dialogDiv).modal("show")},
openTutorialDialog:function(){tutorialView.render();$(this.dialogDiv).modal("show")},openUpdatesDialog:function(){updatesView.render();console.log("hi");$(this.dialogDiv).modal("show")},preventClose:function(a){a.stopPropagation()},initialize:function(){this.template=_.template($("#layout-template").html())},initJS:function(){$(".dropdown-toggle").dropdown();fbApiController.loadApi()},setView:function(a){this.contentView=a},prepareDialogs:function(){this.loggedIn&&(suggestionsView.setElement(this.dialogDiv),
updatesView.setElement(this.dialogDiv));faqView.setElement(this.dialogDiv);tutorialView.setElement(this.dialogDiv)},render:function(){var a={layoutStr:layoutStringsModel,loggedIn:this.loggedIn};this.loggedIn||(a={layoutStr:layoutStringsModel,loggedIn:this.loggedIn,loginStr:loginStringsModel});this.$el.html(this.template(a));this.prepareDialogs();this.initJS();this.contentView&&this.contentView.setElement("#content-div")}});
var layoutView=new LayoutView,DialogView=Backbone.View.extend({el:"",template:"",args:{},templateId:"",initialize:function(){this.template=_.template($(this.templateId).html())},initJS:function(){this.$el.modal()},render:function(){this.$el.html(this.template(this.args));this.initJS()}}),FAQView=DialogView.extend({args:{faqStr:faqStringsModel},templateId:"#faq-template"}),faqView=new FAQView,TutorialView=DialogView.extend({args:{layoutStr:layoutStringsModel},templateId:"#tutorial-template",player:null,
initJS:function(){var a=this;this.$el.modal().css({"margin-left":function(){return-($(this).width()/2)}}).addClass("tutorial").on("hidden",function(){a.$el.empty();a.$el.removeClass("tutorial")});this.player=new YT.Player("yt-player",{height:"390",width:"640",videoId:layoutStringsModel.get("codTutorialYoutube")})}}),tutorialView=new TutorialView;
function FbApiController(){var a=this;this.loadApi=function(){a.insertScript(document,!0)};this.insertScript=function(a,e){var b,d=a.getElementById("fb-root");a.getElementById("facebook-jssdk")||(b=a.createElement("script"),b.id="facebook-jssdk",b.async=!0,b.src="//connect.facebook.net/en_US/all"+(e?"/debug":"")+".js",d.parentNode.insertBefore(b,d))};window.fbAsyncInit=function(){FB.init({status:!1,cookie:!0,xfbml:!0,channelUrl:"//prisma.inf.puc-rio.br/channel.php"})}}
var fbApiController=new FbApiController,LoginStringsModel=Backbone.Model.extend({defaults:{matriculaLabel:"Matr\u00edcula",matriculaMaxLength:"7",passwordLabel:"Senha",passwordMaxLength:"8",submitButtonLabel:"Login",loginHelpText:"Para logar, use sua matr\u00edcula sem o\t\t\td\u00edgito verificador e a mesma senha que voc\u00ea utiliza\t\t\tpara o PUC Online",forgotPasswordText:'Se voc\u00ea esqueceu sua senha, <a href=\t\t\t"http://www.puc-rio.br/ensinopesq/academicas/">clique aqui</a>\t\t\t para acessar o PUC Online e recuper\u00e1-la',
infoText:"O PrISMA, Programa de Instru\u00e7\u00e3o \u00e0 Solicita\u00e7\u00e3o da\t\t\tMatr\u00edcula Acad\u00eamica, \u00e9 um sistema desenvolvido por alunos\t\t\tem parceria com o professor S\u00e9rgio Lifschitz que tem como\t\t\tobjetivo facilitar o preenchimento da primeira fase da\t\t\tmatr\u00edcula",openLoginButtonLabel:"Fazer login",tutorialButtonLabel:"Tutorial",invalidLoginErrorMsg:"Login e/ou senha inv\u00e1lidos!",accessDeniedErrorMsg:"Voc\u00ea precisa se logar para acessar essa p\u00e1gina",
pageDoesNotExistErrorMsg:"A p\u00e1gina que voc\u00ea est\u00e1 acessando n\u00e3o existe no nosso sistema",unexpectedErrorMsg:"O sistema se comportou de forma inesperada - fique tranquilo,\t\t\trecebemos o erro e assim que poss\u00edvel ele ser\u00e1 corrigido"}}),loginStringsModel=new LoginStringsModel,LoginView=Backbone.View.extend({el:"",template:"",events:{"click #open-login-button":"openLogin","click #open-tutorial-button":"openTutorial"},openTutorial:function(){layoutView.openTutorialDialog()},
openLogin:function(){$("#open-login-button-container").addClass("hidden");$("#login-form-container").removeClass("hidden")},initialize:function(){this.template=_.template($("#login-template").html())},render:function(a){void 0==a&&(a=!1);this.$el.html(this.template({loginStr:loginStringsModel,layoutStr:layoutStringsModel,error:a}))}}),loginView=new LoginView,LoginRouter=Backbone.Router.extend({routes:{"":"login","*span":"other"},loadPage:function(a){layoutView.setView(loginView);layoutView.loggedIn=
!1;layoutView.render();loginView.render(a)}}),loginRouter=new LoginRouter;loginRouter.on("route:other",function(){this.navigate("",{trigger:!0})});loginRouter.on("route:login",function(){var a=document.URL.split("?"),c=!1;1<a.length&&(c=a[1].split("#")[0]);this.loadPage(c)});Backbone.history.start();
