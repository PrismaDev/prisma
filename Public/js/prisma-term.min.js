var LayoutStringsModel=Backbone.Model.extend({defaults:{hiStr:"Ol\u00e1",loginStr:"Login",logoutStr:"Logout",commentsStr:"Sugest\u00f5es",updatesStr:"Updates",FAQStr:"FAQ",tutorialStr:"V\u00eddeo-tutorial",codTutorialYoutube:"XHF8WOJ6xI0",projectNameStr:"PrISMA",userName:"Bobteco da Silva",footerText:"Esse projeto \u00e9 uma colabora\u00e7\u00e3o dos alunos\t\t\tJulio Ribeiro, Luiza Silva, Gabriel Martinelli,\t\t\tAndr\u00e9 Mar\u00e7al, Denis Neves, Glauber Borges e\t\t\tMaur\u00edcio Fragale com o professor S\u00e9rgio Lifschitz. \t\t\tContato: prisma@inf.puc-rio.br"}}),
layoutStringsModel=new LayoutStringsModel,FAQStringsModel=Backbone.Model.extend({defaults:{dialogTitle:"FAQ",answerStr:"Resposta:",questionStr:"Pergunta:",questionList:[{question:"N\u00e3o consigo logar no sistema.",answer:"Verifique se suas credenciais do PUC Online est\u00e3o corretas. Caso positivo, verifique se seu navegador est\u00e1 configurado para aceitar COOKIES."},{question:"O que significa cada cor na tabela de falta-cursar?",answer:'Vermelho: disciplina presa por algum pr\u00e9-requisito;\nAmarelo: disciplina que voc\u00ea est\u00e1 cursando ou que est\u00e1 presa por algum pr\u00e9-requisito que voc\u00ea est\u00e1 cursando;\nBranco: voc\u00ea est\u00e1 "apto" a cursar. Sugerimos verificar ementa no site da PUC para comprovar aptid\u00e3o.\nAzul: disciplina selecionada. Suas turmas est\u00e3o sendo exibidas;'},
{question:"Como adiciono turma?",answer:"Basta clicar na turma em quest\u00e3o."},{question:"Como removo turma?",answer:'Clique nela novamente.\nOu ent\u00e3o a visualize na aba de selecionadas e clique no bot\u00e3o "x".'},{question:"Como sei que a turma foi inserida?",answer:"\u00c9 apresentada uma notifica\u00e7\u00e3o na aba de selecionadas e aparece na tabela de horarios em cores sempre distintas."},{question:"Como adiciono disciplinas que n\u00e3o est\u00e3o no meu falta cursar?",answer:"Basta procurar a turma na aba de micro hor\u00e1rio e clicar na disciplina e depois na turma desejada."},
{question:"O que fazer na tela de selecionada?",answer:"Voc\u00ea pode fazer o que quiser, basicamente. Tanto trocar as turmas de posi\u00e7\u00e3o movendo-as para um lugar vazio, quanto trocando-as de lugar com alguma outra. Assim como tamb\u00e9m \u00e9 poss\u00edvel trocar as linhas de ordem."},{question:"Mas por que isso \u00e9 importante?",answer:"Porque o PUC Online funciona assim. Ao fazer o processamento das disciplinas, as disciplinas mais priorit\u00e1rias ser\u00e3o aquelas que est\u00e3o nas primeiras linhas e primeiras op\u00e7\u00f5es. Desta maneira, voc\u00ea pode trocar a prioridade de todas as turmas escolhidas simplesmente arrastando elas para onde voc\u00ea quiser."},
{question:"Ok, mas e da\u00ed?",answer:"Da\u00ed que voc\u00ea pode usar a magica funcionalidade dos radio buttons, apresentados logo do lado esquerdo de cada lugar que pode receber uma turma. Esses radio buttons representam a turma que foi poss\u00edvel de pegar na simula\u00e7\u00e3o."},{question:"Simula\u00e7\u00e3o? Como funciona?",answer:"Tem por objetivo simular o que pode acontecer com a sua solicita\u00e7\u00e3o de matr\u00edcula no PUC Online.\nTendo conhecimento da prioriza\u00e7\u00e3o das primeiras linhas e primeiras op\u00e7\u00f5es, a simula\u00e7\u00e3o tenta sempre pegar as turmas nesse sentido do processamento. Isto \u00e9, voc\u00ea pode simular as op\u00e7\u00f5es que ser\u00e3o pegas em cada linha. Automaticamente ser\u00e1 realizada uma cascata nas linhas menos priorit\u00e1rias de forma a mostrar o que realmente aconteceria caso aquela op\u00e7\u00e3o fosse pega."},
{question:"Legal. Montei minha grade, e agora?",answer:"Infelizmente sua grade est\u00e1 salva em nosso sistema, mas n\u00e3o no PUC Online. Voc\u00ea deve entrar com os dados que foram gerados aqui no sistema de requisi\u00e7\u00e3o de matr\u00edcula acad\u00eamica, que fica localizado dentro do PUC Online."},{question:"O sistema apresenta erros / n\u00e3o funciona no meu navegador.",answer:"Infelizmente o sistema foi desenvolvido tirando proveito de recursos n\u00e3o suportados por browsers muito antigos. Recomendo a utiliza\u00e7\u00e3o da vers\u00e3o mais recente do seu browser favorito. N\u00e3o esque\u00e7a de nos notificar o bug para que possamos tentar consert\u00e1-lo; utilize o campo de sugest\u00f5es para tal\nObs: o site pode estar n\u00e3o completamente funcional no Internet Explorer. Recomendamos o uso de algum outro navegador popular dispon\u00edvel atualmente. Aqueles que recomendamos s\u00e3o: Google Chrome, Mozilla Firefox, Opera."}]}}),
faqStringsModel=new FAQStringsModel;
LayoutView=Backbone.View.extend({el:"body",template:"",contentView:null,loggedIn:!1,dialogDiv:"#dialog-div",events:{"click #open-suggestions-link":"openSuggestionDialog","click #open-faq-link":"openFAQDialog","click #open-tutorial-link":"openTutorialDialog","click #open-updates-link":"openUpdatesDialog","click ul div.dropdown-menu":"preventClose"},openSuggestionDialog:function(){suggestionsView.render();$(this.dialogDiv).modal("show")},openFAQDialog:function(){faqView.render();$(this.dialogDiv).modal("show")},
openTutorialDialog:function(){tutorialView.render();$(this.dialogDiv).modal("show")},openUpdatesDialog:function(){updatesView.render();updatesView.initTwitter();$(this.dialogDiv).modal("show")},preventClose:function(a){a.stopPropagation()},initialize:function(){this.template=_.template($("#layout-template").html())},initJS:function(){$(".dropdown-toggle").dropdown();fbApiController.loadApi()},setView:function(a){this.contentView=a},prepareDialogs:function(){this.loggedIn&&(suggestionsView.setElement(this.dialogDiv),
updatesView.setElement(this.dialogDiv));faqView.setElement(this.dialogDiv);tutorialView.setElement(this.dialogDiv)},render:function(){var a={layoutStr:layoutStringsModel,loggedIn:this.loggedIn};this.loggedIn||(a={layoutStr:layoutStringsModel,loggedIn:this.loggedIn,loginStr:loginStringsModel});this.$el.html(this.template(a));this.prepareDialogs();this.initJS();this.contentView&&this.contentView.setElement("#content-div")}});
var layoutView=new LayoutView,DialogView=Backbone.View.extend({el:"",template:"",args:{},templateId:"",initialize:function(){this.template=_.template($(this.templateId).html())},initJS:function(){this.$el.modal()},render:function(){this.$el.html(this.template(this.args));this.initJS()}}),FAQView=DialogView.extend({args:{faqStr:faqStringsModel},templateId:"#faq-template"}),faqView=new FAQView,TutorialView=DialogView.extend({args:{layoutStr:layoutStringsModel},templateId:"#tutorial-template",player:null,
initJS:function(){var a=this;this.$el.modal().css({"margin-left":function(){return-($(this).width()/2)}}).addClass("tutorial").on("hidden",function(){a.$el.empty();a.$el.removeClass("tutorial")});this.player=new YT.Player("yt-player",{height:"390",width:"640",videoId:layoutStringsModel.get("codTutorialYoutube")})}}),tutorialView=new TutorialView;
function FbApiController(){var a=this;this.loadApi=function(){a.insertScript(document,!0)};this.insertScript=function(a,d){var b,c=a.getElementById("fb-root");a.getElementById("facebook-jssdk")||(b=a.createElement("script"),b.id="facebook-jssdk",b.async=!0,b.src="//connect.facebook.net/en_US/all"+(d?"/debug":"")+".js",c.parentNode.insertBefore(b,c))};window.fbAsyncInit=function(){FB.init({status:!1,cookie:!0,xfbml:!0,channelUrl:"//prisma.inf.puc-rio.br/channel.php"})}}
var fbApiController=new FbApiController,SuggestionsStringsModel=Backbone.Model.extend({defaults:{dialogTitle:"Sugest\u00f5es/Bugs/Coment\u00e1rios...",submitButtonLabel:"Enviar coment\u00e1rio",resetButtonLabel:"Limpar campo"}}),suggestionsStringsModel=new SuggestionsStringsModel,UpdatesStringsModel=Backbone.Model.extend({defaults:{dialogTitle:"\u00daltimos updates do PrISMA"}}),updatesStringsModel=new UpdatesStringsModel,SuggestionsView=DialogView.extend({templateId:"#suggestions-template",args:{suggestionsStr:suggestionsStringsModel},
suggestionsUrl:"/api/sugestao",events:{"submit #suggestions-form":"sendSuggestion","keypress textarea":"toggleButton"},toggleButton:function(a){a=a.target;console.log(a);""==a.value.trim()?$('#suggestions-form input[type="submit"]').addClass("disabled"):$('#suggestions-form input[type="submit"]').removeClass("disabled")},sendSuggestion:function(){if($('#suggestions-form input[type="submit"]').hasClass("disabled"))return!1;$.ajax({url:this.suggestionsUrl,type:"POST",data:$("#suggestions-form").serialize(),
success:function(){$("#dialogDiv").modal("hide")}});return!1}}),suggestionsView=new SuggestionsView,UpdatesView=DialogView.extend({templateId:"#updates-template",args:{updatesStr:updatesStringsModel},initTwitter:function(){twttr.widgets.load()}}),updatesView=new UpdatesView,TermStringsModel=Backbone.Model.extend({defaults:{acceptCheckboxLabel:"Eu aceito o termo de compromisso do PrISMA",cancelButtonLabel:"N\u00e3o aceito",acceptButtonLabel:"Eu li e aceitei o termo de compromisso",termText:'Termo de Compromisso\n\n \tDeclaro que estou ciente que o sistema PrISMA n\u00e3o tem nenhuma responsabilidade quantos \u00e0s grades geradas nele, assim como n\u00e3o se responsabiliza por poss\u00edveis erros que ele permitiu o usu\u00e1rio cometer. Tamb\u00e9m declaro ter conhecimento dos seguintes \u00edtens:\n\n 1/ Apenas alunos regularmente matriculados na PUC-Rio podem utilizar este sistema. A autentica\u00e7\u00e3o \u00e9 a mesma do PUConline. \n\n 2/ O uso do PrISMA por parte de alunos da PUC-Rio \u00e9 opcional. Alunos podem efetivar sua 1a fase de matr\u00edcula diretamente pelo PUConline, sem aux\u00edlio do PrISMA. \n\n 3/ O sistema PrISMA auxilia na montagem de 3 op\u00e7\u00f5es de matr\u00edcula do aluno da PUC-Rio, usando as informa\u00e7\u00f5es do hist\u00f3rico, contemplando o "Falta Cursar", disciplinas que o aluno est\u00e1 cursando no atual per\u00edodo e tamb\u00e9m as disciplinas j\u00e1 conclu\u00eddas com sucesso. \n\n 4/ Important\u00edssimo: o PrISMA n\u00e3o realiza a matr\u00edcula em si! Ap\u00f3s usar o sistema, o aluno precisa obrigatoriamente utilizar o PUConline e entrar com as op\u00e7\u00f5es propostas ap\u00f3s utilizar o PrISMA. N\u00e3o h\u00e1 como importar as escolhas definidas ap\u00f3s utiliza\u00e7\u00e3o do PrISMA diretamente para o PUConline, trata-se de uma a\u00e7\u00e3o a ser realizada manualmente por cada aluno. \n\n 5/ O uso do sistema PrISMA n\u00e3o garante nem aumenta as chances do aluno da PUC-Rio conseguir matr\u00edcula em uma ou mais das disciplinas oferecidas para o pr\u00f3ximo semestre. Tamb\u00e9m n\u00e3o h\u00e1 como garantir que o resultado final do PrISMA de cada aluno corresponda \u00e0 melhor solu\u00e7\u00e3o poss\u00edvel para grade de hor\u00e1rios do pr\u00f3ximo semestre. \n\n 6/ Na vers\u00e3o atual, o PrISMA verifica pr\u00e9-requisitos b\u00e1sicos e permite orientar o aluno para matr\u00edculas em disciplinas que ele PODE CURSAR. Assim, o aluno perceber\u00e1 que para algumas disciplinas n\u00e3o \u00e9 permitida a escolha para alguma op\u00e7\u00e3o - caso n\u00e3o tenha pr\u00e9-requisitos, por exemplo - ou ent\u00e3o h\u00e1 um aviso de aten\u00e7\u00e3o para disciplinas sendo cursadas, pois uma vez o aluno aprovado n\u00e3o poder\u00e1 solicitar na matr\u00edcula, ou ainda, pode ser alguma disciplina pr\u00e9-requisito de outra. \n\n 7/ O PrISMA n\u00e3o garante que voc\u00ea est\u00e1 apto a cursar todas as turmas escolhidas. Isso ocorre pois as turmas podem ser destinadas a certos cursos e esse tipo de checagem n\u00e3o est\u00e1 sendo feita nessa vers\u00e3o.'}}),
termStringsModel=new TermStringsModel,TermView=Backbone.View.extend({el:"",template:"",events:{'click input[type="submit"]':"checkAcceptance",'change input[type="checkbox"]':"toggleContinueButton"},checkAcceptance:function(){return $('input[type="checkbox"]').is(":checked")?!0:!1},toggleContinueButton:function(){$('input[type="checkbox"]').is(":checked")?$('input[type="submit"]').removeClass("disabled"):$('input[type="submit"]').addClass("disabled")},initialize:function(){this.template=_.template($("#term-template").html())},
render:function(){this.$el.html(this.template({termStr:termStringsModel}))}}),termView=new TermView,TermRouter=Backbone.Router.extend({routes:{"":"term"},loadPage:function(){layoutStringsModel.set("userName",DATA_VIEW.NomeAluno);layoutView.setView(termView);layoutView.loggedIn=!0;layoutView.render();termView.render()}}),termRouter=new TermRouter;termRouter.on("route:term",function(){this.loadPage()});Backbone.history.start();
