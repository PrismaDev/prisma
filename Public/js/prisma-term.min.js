var LayoutStringsModel = Backbone.Model.extend({
	defaults: {
		'hiStr': 'Olá',
		'loginStr': 'Login',
		'logoutStr': 'Logout',
		'projectNameStr': 'PrISMA',
		'userName': 'Bobteco da Silva',
		'footerText': 'Esse projeto é uma colaboração dos alunos\
			Julio Ribeiro, Luiza Silva, Gabriel Martinelli,\
			André Marçal, Denis Neves, Glauber Borges e\
			Maurício Fragale com o professor Sérgio Lifschitz.'
	}
});

var layoutStringsModel = new LayoutStringsModel();
var TermStringsModel = Backbone.Model.extend({
	defaults: {
		'acceptCheckboxLabel': 'Eu aceito o termo de compromisso do PrISMA',
		'cancelButtonLabel': 'Não aceito',
		'acceptButtonLabel': 'Eu li e aceitei o termo de compromisso',
		'termText': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam quam ligula, eleifend eget vulputate sed, dictum quis urna. Pellentesque eget urna sed dolor laoreet laoreet. Aliquam erat volutpat. Nulla mattis vestibulum nisl at consequat. Donec vitae nisi at massa adipiscing dapibus eu ac sapien. Sed ligula diam, vehicula vitae consectetur eu, fermentum ut nulla. Suspendisse fringilla, leo vitae rutrum ultricies, lacus sapien scelerisque leo, eget mattis odio augue eu velit. Donec non tortor eget sapien adipiscing ultrices. Ut eleifend, mi vitae sollicitudin tincidunt, ante dolor pellentesque sapien, vel lacinia elit nulla sit amet tortor. Pellentesque facilisis lorem sit amet nulla volutpat mattis. Phasellus a ligula dolor, et volutpat odio. Mauris et enim dui. In pellentesque urna sit amet lorem adipiscing tempus. Nullam sodales augue neque.\
Curabitur eget sem massa. Cras molestie cursus nibh vitae ultricies. Cras molestie nulla nec dolor luctus et porttitor nulla viverra. Quisque vel ante nulla. Maecenas condimentum neque et augue molestie eu suscipit nisi porttitor. Integer congue metus id mauris elementum et blandit est lacinia. Praesent sed nunc odio. Aenean mollis, purus eu mollis volutpat, dui eros faucibus augue, nec iaculis nibh neque pretium dui. Mauris mauris nisl, volutpat at tempor non, posuere sit amet velit. Donec in neque a elit pharetra sodales a at velit.\
Pellentesque commodo varius lorem, eget mattis nisl viverra nec. Pellentesque mauris sapien, egestas ac elementum eget, fermentum sagittis mauris. Maecenas at neque ipsum. Morbi auctor malesuada lacinia. Suspendisse feugiat leo at sem gravida ac viverra turpis commodo. Sed ornare sapien eget felis suscipit eget vehicula augue venenatis. Sed rutrum, nisl eget congue placerat, metus justo tincidunt ligula, sit amet suscipit massa est vitae elit.\
Phasellus porta varius placerat. Nulla facilisi. Sed malesuada sapien eget libero eleifend sed consectetur nisi eleifend. In ante diam, dapibus vitae posuere eget, faucibus gravida metus. Integer vitae mauris ac sapien convallis bibendum. Sed cursus sollicitudin rhoncus. Fusce imperdiet tincidunt arcu id ornare. In fermentum tortor a urna tincidunt tempus.\
Duis ut turpis lectus. Nam consectetur laoreet nisl ac egestas. Maecenas interdum ipsum ut metus bibendum nec imperdiet leo vestibulum. Nam ut dictum ligula. Curabitur eu nibh odio, a scelerisque orci. Integer gravida tristique nisl, eget tristique lectus posuere eu. Duis at turpis id urna imperdiet venenatis. Vestibulum ante leo, auctor id hendrerit vitae, elementum vitae urna. Cras lorem nisi, viverra et aliquet non, imperdiet sed nisi. Nullam vestibulum dignissim dignissim. Sed imperdiet dictum enim nec pretium. Duis sollicitudin, turpis et fringilla gravida, nulla odio scelerisque magna, sit amet venenatis dui orci eget risus.'
	}
});

var termStringsModel = new TermStringsModel();
var TermView = Backbone.View.extend({
	el: 'body',
	layoutTemplate: '',
	termTemplate: '',

	events: {
		'click input[type="submit"]': 'checkAcceptance',
		'change input[type="checkbox"]': 'toggleContinueButton'
	},

	checkAcceptance: function() {
		if ($('input[type="checkbox"]').is(':checked'))
			return true;
		return false;
	},

	toggleContinueButton: function() {
		if ($('input[type="checkbox"]').is(':checked'))
			$('input[type="submit"]').removeClass('disabled');
		else
			$('input[type="submit"]').addClass('disabled');	
	},

	initialize: function() {
		this.layoutTemplate = _.template($("#layout-template").html());
		this.termTemplate = _.template($("#term-template").html());
	},

	render: function() {
		this.$el.html(this.layoutTemplate({
			layoutStr: layoutStringsModel,
			loggedIn: true
		}));

		$('#content-div').html(this.termTemplate({
			termStr: termStringsModel
		}));
	}
});

var termView = new TermView();
var TermRouter = Backbone.Router.extend({
	routes: {
		'': 'term'
	},

	loadPage: function() {
		layoutStringsModel.set('userName',DATA_VIEW.NomeAluno);
		termView.render();
	}
});

var termRouter = new TermRouter();
termRouter.on('route:term', function() {
	this.loadPage();
});

//if (history.pushState) { 
//	console.log("pushState supported");
//	Backbone.history.start({pushState: true});
//}
//else {
//	console.log("pushState NOT supported");
	Backbone.history.start();
//}
